#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

#set($isEditable = true)

$cms.template("Top")

<div class="customerBodyWrapper">

	<div class="customerWide">
	<a href="/en/vm">Refresh Page</a>
	#foreach($field in $wma.profileFields) 
		#if($req.param("field_${field.tag}").length() > 0)
		$codeDebug.log("Setting Profile Field (wma.profile.setStringValue($field.tag, $req.param('field_${field.tag}'))). Setting field $field.tag to $req.param('field_${field.tag}')")
		<br><b>Setting Profile Field (\$wma.profile.setStringValue($field.tag, $req.param("field_${field.tag}"))):</b><br><br>
		Setting field $field.tag to $req.param("field_${field.tag}") <br>
			#if($field.dataType == "text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Long Text")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "E-mail")
				$wma.profile.setStringValue($field.tag,$req.param("field_${field.tag}"))
				#elseif($field.dataType == "Number")
				$wma.profile.setLongValue($field.tag,$req.longParam("field_${field.tag}"))
				#elseif($field.dataType == "Date")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Date/Time")
				$wma.profile.setDateValue($field.tag,$req.dateParam("field_${field.tag}","yyyy-MM-dd'T'HH:mm:ss",$wma.getTimeZone().getID()))
				#elseif($field.dataType == "Flag")
				$wma.profile.setBooleanValue($field.tag,$req.booleanParam("field_${field.tag}"))
			#end
		#end
	#end
	#if($req.param("ls").length() > 0)
	<br>Setting Lead Score: wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))<br>
	#end
	</div><br>
	#if((!$wma.isRegistered() || ($wma.isRegistered() && $wma.isLoggedIn())) && (!$req.param("login") || $req.param("login") != "y"))
		#set($user = $cms.subscriptionUser)
		<div class="customerWide">
		#########################################
		### Start Registration Form
		#########################################
		#if($subscription.error)
		<div class="subscriptionError">
		DefaultMsg:<font color="red">$!subscription.errorMessage</font>
		</div>
		<div class="subscriptionError">
		ErrorCode:<font color="red">$!subscription.errorCode</font>
		</div>
		<div class="subscriptionError">
		ErrorDetails:<font color="red">$!subscription.errorDetails</font>
		</div><br>
		#end
		#############################
		#* test form
		<form name="profileForm" method="post" action="/s">
		<input type="hidden" name="action" value="doReg" />
       #set($profileList=$wma.getProfileFields())
       #foreach($dataobj in $profileList)
         $dataobj.label : <input type="text" name="$dataobj.tag"/>
        <br>
       #end
      <input type="submit"/>
		</form>
		*#
		#############################
		
		
		#if($userLocation.isAvailable())
			#if($wma.profile.city)
				#set($city = $wma.profile.city)
			#else
				#set($city = $userLocation.city)
			#end
			#if($wma.profile.country)
				#set($country = $wma.profile.country)
			#else
				#set($country = $userLocation.country)
			#end
			#if($wma.profile.company)
				#set($company = $wma.profile.company)
			#else
				#set($company = $userLocation.organization)
			#end
			#if($wma.profile.state)
				#set($state = $wma.profile.state)
			#else
				#set($state = $userLocation.region)
			#end
			#if($wma.profile.areaCode)
				#set($phone = "${wma.profile.areacode}-")
			#else
				#set($phone = "${userLocation.areacode}-")
			#end
		#end

		<script type="text/javascript">
		<!--
		function validate(form) {
			var e = form.elements;
			if(e['email'].value == '') {
				alert('Please Enter Your Email Address');
				e['email'].focus();
				return false;
			}
			if(e['confirm_email'].value == '') {
				alert('Please Confirm Your Email Address');
				e['confirm_email'].focus();
				return false;
			}
			if(e['email'].value != e['confirm_email'].value) {
				alert('Your Email Addresses Do Not Match');
				e['confirm_email'].focus();
				return false;
			}
			if(e['username'].value == '') {
				alert('Please Enter Your Login/User Name');
				e['username'].focus();
				return false;
			}
			if(e['password'].value == '') {
				alert('Please Enter Your Password');
				e['password'].focus();
				return false;
			}
			if(e['confirm_password'].value == '') {
				alert('Please Retype Your Password');
				e['confirm_password'].focus();
				return false;
			}
			if(e['password'].value != e['confirm_password'].value) {
				alert('Your Passwords Do Not Match');
				e['confirm_password'].focus();
				return false;
			}
			}
		-->
		</script>
		
		<form method="post" action="/s" name="userProfileForm" id="userProfileForm" onsubmit="return validate(this);" enctype="multipart/form-data">
			#if($wma.isLoggedIn())
				<input type="hidden" name="action" value="updateReg" />
				#set($changeStatus = "update")
			#else
				<input type="hidden" name="action" value="doReg" />
				#set($changeStatus = "create")
			#end
			<input type="hidden" name="city" value="$!city" />
			<input type="hidden" name="country" value="$!country" />
			<input type="hidden" name="company" value="$!organization" />
			<input type="hidden" name="state" value="$!state" />
			<input type="hidden" name="areacode" value="$!areaCode" />
			<input type="hidden" name="rurl" value="/en/vm" />
			#if($wma.isLoggedIn())
				Registration Information<br>
			#else
				Sign Up Now!<br>
				or <a href="${req.fullURL}?login=y">Login</a><br>
			#end
			<p>
			#if($wma.isLoggedIn())<span class="bold">First Name:</span> $!wma.profile.firstname
			#else
				<label for="firstname"><span class="bold">First Name:</span><br>
					<input type="text" name="firstname" id="firstname" size="50" maxlength="128" #if($wma.profile.firstname) value=$wma.profile.firstname#else value='$!req.param("firstname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Last Name:</span> $!wma.profile.lastname
			#else
				<label for="lastname"><span class="bold">Last Name:</span><br>
					<input type="text" name="lastname" id="lastname" size="50" maxlength="128" #if($wma.profile.lastname) value=$wma.profile.lastname#else value='$!req.param("lastname")' #end>
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn() && $user.username)<span class="bold">User Name:</span> $!user.username
			#else
				<label for="user_name"><span class="bold">* User Name:</span><br>
					 <input type="text" name="username" id="username" size="50" maxlength="128" value='$!req.param("username")'> 
				</label>
			#end
			</p>
			<p>
			#if($wma.isLoggedIn())<span class="bold">Login/Email Address:</span> $!wma.profile.email
			#else
				<label for="email"><span class="bold">* Login/Email Address:</span><br>
					<input type="text" name="email" id="email" size="50" maxlength="128" #if($wma.profile.email) value=$wma.profile.email #else value='$!req.param("email")' #end>
				</label>
			#end
			</p>
			<p>
			#if(!$wma.isLoggedIn())
				<label for="confirm_email"><span class="bold">* Confirm Email:</span><br>
					<input type="text" name="confirm_email" id="confirm_email" size="50" maxlength="128" #if($wma.profile.email) value="$!wma.profile.email" #else value='$!req.param("email")' #end>
				</label>
			</p>
			#end
			#if(!$wma.isRegistered())
			<p>
				<label for="password"><span class="bold">* Password:</span><br>
					<input type="password" name="password" id="password" size="50" maxlength="128" #if($req.param("password")) value='$!req.param("password")' #end>
				</label>
			</p>

			<p>
				<label for="confirm_password"><span class="bold">* Retype Password:</span><br>
					<input type="password" name="confirm_password" id="confirm_password" size="50" maxlength="128" #if($req.param("confirm_password")) value='$!req.param("confirm_password")' #end>
				</label>
			</p>
			#end
			<p>
				<input name="list.4694" id="taborResearch"  type="checkbox" #if($user.subscribedTo(4694) || $req.param("list.4694") == "subscribe")checked value="subscribed" #else value="subscribe" #end>
				<input name="listInit.4694" #if($cms.subscriptionUser.subscribedTo(4694)) value="subscribed"#else value="unsubscribed"#end type="hidden"> Sign up for Animal Updates!
			</p>
			
			#if($wma.isLoggedIn())
			<input type="submit" name="submit" id="submit" value="Update Profile">
			#else
			<input type="submit" name="submit" id="submit" value="Submit">
			#end
		</form>
		</div><br><br>
	#########################################
	## End Registration Form
	#########################################
	#elseif(($wma.isRegistered() && !$wma.isLoggedIn()) || $req.param("login") == "y")
	<div class="customerWide">
	Login Here:<br>
		<form name="login" method="post" action="/s">
		<input type="hidden" name="action" value="doLogin" />
		<input type="hidden" name="rurl" value="/en/vm" />
		<div class="block">
		<table>
		<tr>
		<td>Email:</td>
		<td><input type="text" name="email" id="emailInput" /></td>
		</tr>
		<tr>
		<td>Password:</td>
		<td><input type="password" name="password" /></td>
		</tr>
		</table>
		<input type="submit" value="login"/>
		</div>
		</form> <br>
	</div>
	#end
	<div class="customerWide">
		#if($wma.isLoggedIn())
			<a href="/s?action=doLogout">Logout Here</a><br>
		#end
		Is Logged In (\$wma.isLoggedIn()): $wma.isLoggedIn()<br>
		Is Registered (\$wma.isRegistered()): $wma.isRegistered()<br>
	</div>

	<div class="customerWide">
		<br><b>Visitor Data</b><br>
		Lead Score (\$wma.getLeadScore()): $wma.getLeadScore()<br>

		#set($level = $wma.profileLevel)
		Profile Level (\$wma.profileLevel): #if($level) $level.level - $level.name - $level.scoreTrigger #else None #end <br>
		Page View Count (\$wma.pageViewCount): $wma.pageViewCount<br>
		Visit Count (\$wma.visitCount): $wma.visitCount<br>
		Search Count (\$wma.searchCount): $wma.searchCount<br>
		Visitor State(\$wma.state): $wma.state<br>
		isMarketingActivityBlocked(\$wma.isMarketingActivityBlocked()): $wma.isMarketingActivityBlocked()<br>
		Date of First activity(\$wma.firstActivity): $wma.firstActivity<br>
		RegUserID(\$wma.registeredUserId): $wma.registeredUserId<br>
		Timezone (\$wma.timeZone): $wma.timeZone<br>
	</div>

	<div class="customerWide">
		<br><b>Lead Score (\$wma.leadScore): $wma.leadScore </b><br>
		
		Adjustments (\$wma.leadScoreAdjustments):<br>
		#foreach($adj in $wma.leadScoreAdjustments)
		#if($string.length($adj.description) > 20)
			#set($leadDescription = "$string.substring($adj.description, 0, 17)...")
		#else
			#set($leadDescription = $adj.description)
		#end
		#if($adj.increment)Inc #else Set #end $adj.amount at $adj.time - $adj.type - $leadDescription <br>
		#end
	</div>

	<div class="customerWide">
		<br><b>Interest Definitions</b> 
		<div>
		<br>Interests (\$wma.interestDefinitions): <br>
		#foreach($interest in $wma.interestDefinitions)
			$interest.tag - $interest.name - Score: $!wma.getInterestScore($interest.tag)<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Action Definitions</b>  
		<div>
		<br>Actions (\$wma.actionDefinitions): <br>
		#foreach($action in $wma.actionDefinitions)
		$action.tag - $action.name - $action.leadScoreAdjustment<br>
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Progressive Profile Levels</b>  
		<div>
		<br>Levels (\$wma.getProfileLevels()): <br>
		#foreach($level in $wma.getProfileLevels())
		$level.level - $level.name - $level.scoreTrigger<br>
			#foreach($level in $level.fields)
				#if($velocityCount == 1)
					Assigned Fields -<br>
				#end
				-- $level.label - $level.tag<br>
			#end
		#end
		</div>
	</div>
	
	<div class="customerWide">
		<br><b>Fields </b>  
		<div>
		<br>Fields (\$wma.getProfileFields()): <br>
		<table border=1>
		#foreach($field in $wma.getProfileFields())
		<tr>
		<td rowspan="7">$field.getLabel()</td>
		<td><b>getDataType()</b></td>
		<td>$!field.getDataType()</td>
		</tr>
		<tr>
		<td><b>getDefaultValue()</b></td>
		<td>#if($field.getDefaultValue()) $!field.getDefaultValue()  #else None #end</td>
		</tr>
		<tr>
		<td><b>getFieldType()</b></td>
		<td>$!field.getFieldType()</td>
		</tr>
		<tr>
		<td><b>getLabel()</b></td>
		<td>$!field.getLabel()</td>
		</tr>
		<tr>
		<td><b>getLeadScoreContribution()</b></td>
		<td>$!field.getLeadScoreContribution()</td>
		</tr>
		<tr>
		<td><b>getProgressiveProfileLevel()</b></td>
		<td>$!field.getProgressiveProfileLevel()</td>
		</tr>
		<tr>
		<td><b>getTag()</b></td>
		<td>$!field.getTag()</td>
		</tr>
		#end
		</table>
		</div>

	</div>
	
	<div class="customerWide">
		#set($profile = $wma.profile)
		<br><b>Field Values (size == $profile.size())</b>  
		<div>
		<br>Field Values (\$wma.profile.fields): <br>
		<table border=1>
		#foreach($field in $profile.fields)
		<tr>
		<td><b>dataType</b></td>
		<td>$!field.dataType</td>
		</tr>
		<tr>
		<td><b>defaultValue</b></td>
		<td>#if($field.defaultValue) $field.defaultValue  #else None #end</td>
		</tr>
		<tr>
		<td><b>fieldType</b></td>
		<td>$!field.fieldType</td>
		</tr>
		<tr>
		<td><b>label</b></td>
		<td>$!field.label</td>
		</tr>
		<tr>
		<td><b>leadScoreContribution</b></td>
		<td>$!field.leadScoreContribution</td>
		</tr>
		<tr>
		<td><b>progressiveProfileLevelId</b></td>
		<td>$!field.progressiveProfileLevelId</td>
		</tr>
		<tr>
		<td><b>tag</b></td>
		<td>$!field.tag</td>
		</tr>
		<tr>
		<td style="background-color:lightgreen"><b>value</b></td>
		<td style="background-color:lightgreen">$!field.value</td>
		</tr>
		#end
		</table>
		</div>
	</div>
	


</div>

<div id="tagForm" class="customerBodyWrapper">
	
	<form name="profileForm" method="get" action="/en/vm">

	<div class="customerWide">

		<br><b>Profile Form </b>  
		<div>
		#if($subscription.error)
		<b> Error Info : $subscription.error</b>
			<table>			
			    <tr>
			        <td>errorCode: $subscription.errorCode </td>
			    </tr>
			    <tr>
			        <td>errorDetails: $subscription.errorDetails</td>
			    </tr>	
		</table>
		#end 
        	<input type="hidden" name="errorDestId" value="$cms.websiteSection.id" />
		#if($cms.content)
		        <input type="hidden" name="errorContentId" value="$cms.content" />
		#end 		
		#foreach($field in $wma.getProfileFields())
		<br><input onclick="$('field_${field.tag}').disabled = !(this.checked)" type="checkbox">
		$field.tag 
		#set($stringValue = "")
		#if($field.dataType.name == "Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Long Text")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "E-mail")
		#set($stringValue = $wma.profile.getValue($field.tag).value)
		#elseif($field.dataType.name == "Number")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#elseif($field.dataType.name == "Date")
		#set($stringValue = $util.date("yyyy-MM-dd",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Date/Time")
		#set($stringValue = $util.date("yyyy-MM-dd'T'HH:mm:ss",$wma.profile.getValue($field.tag).value,$wma.getTimeZone().getID()))
		#elseif($field.dataType.name == "Flag")
		#set($stringValue = $wma.profile.getValue($field.tag).value.toString())
		#end
		<input value="$stringValue" name="field_${field.tag}" id="field_${field.tag}" disabled="disabled" type="text">
		<br>
		#end
		
		<input value="submit" type="submit">

		</div>
	</div>
	
	<div class="customerWide">
		#if($req.param("lsAdj").length() > 0)
		$wma.adjustLeadScore($req.intParam("lsAdj"),$req.param("lsAdjDesc"))
		#end
		<h4>adjustLeadScore(int adjustment, String description)</h4>
		<input onclick="$('lsAdj').disabled = !(this.checked); $('lsAdjDesc').disabled = !(this.checked)" type="checkbox">
		Adjustment: <input name="lsAdj" id="lsAdj" value="5" disabled="disabled" type="text">

		Desc: <input name="lsAdjDesc" id="lsAdjDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("ls").length() > 0)
			$wma.setLeadScore($req.intParam("ls"),$req.param("setLsDesc"))
			$codeDebug.log("Setting Lead Score: wma.setLeadScore($req.intParam('ls'),$req.param('setLsDesc'))")
		#end
		<h4>setLeadScore(int adjustment, String description)</h4>
		<input onclick="$('ls').disabled = !(this.checked);$('setLsDesc').disabled = !(this.checked)" type="checkbox">

		Adjustment: <input name="ls" id="ls" value="5" disabled="disabled" type="text">
		Desc: <input name="setLsDesc" id="setLsDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("trackInterestTag").length() > 0)
			$wma.trackInterest($req.param("trackInterestTag"))
		#end
		<h4>trackInterest(String interestTag)</h4>

		<input onclick="$('trackInterestTag').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="trackInterestTag" id="trackInterestTag" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag1").length() > 0)
			$wma.setInterestScore($req.param("interestTag1"),$req.intParam("adjIntScore"))
		#end
		<h4>setInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag1').disabled = !(this.checked);$('adjIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag1" id="interestTag1" value="" disabled="disabled" type="text">
		Score: <input name="adjIntScore" id="adjIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("interestTag2").length() > 0)
		$wma.adjustInterestScore($req.param("interestTag2"),$req.intParam("setIntScore"))
		#end
		<h4>adjustInterestScore(String interestTag, int score)</h4>

		<input onclick="$('interestTag2').disabled = !(this.checked);$('setIntScore').disabled = !(this.checked)" type="checkbox">
		Interest Tag: <input name="interestTag2" id="interestTag2" value="" disabled="disabled" type="text">
		Score: <input name="setIntScore" id="setIntScore" value="5" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	<div class="customerWide">
		#if($req.param("searchTerms","").length() > 0)
		$wma.trackSearch($req.param("searchTerms",""))
		#end
		<h4>trackSearch(String searchTerms)</h4>

		<input onclick="$('searchTerms').disabled = !(this.checked)" type="checkbox">
		Search Terms: <input name="searchTerms" id="searchTerms" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
	
	<div class="customerWide">
		#if($req.param("actionTag","").length() > 0)
		$wma.trackVisitorAction($req.param("actionTag",""),$req.param("actionDesc",""))
		#end
		<h4>trackVisitorAction(String actionTag, String description)</h4>

		<input onclick="$('actionTag').disabled = !(this.checked);$('actionDesc').disabled = !(this.checked)" type="checkbox">
		Action Tag: <input name="actionTag" id="actionTag" value="" disabled="disabled" type="text">
		Desc: <input name="actionDesc" id="actionDesc" value="" disabled="disabled" type="text">
		<input value="submit" type="submit">
	</div>
	
</form>	

</div>

$cms.template("Bottom")

